RecCenter=my_color_tile()(rec_sr_points),
Restroom=my_color_tile()(restroom_points),
Splashpad=my_color_tile()(splashground_points)
)%>%
select(Rank,City,Area,Accessible,Spending,Basketball,Playground,Restroom)%>%
kable(
"html", escape = F,align=c("clcccccc"),
) %>%
kable_material_dark(html_font = "Cambria") %>%
row_spec(0, color = "white") %>%
add_header_above(c("OHIO CITIES"=2, "Score Per Category" = 6), color="white", size=20)%>%
column_spec(2,width_min='4cm')%>%
column_spec(3:8,width_min='3cm')%>%
footnote(general = "<strong>Source: #TidyTuesday | Moriah Taylor | Inspired by: @BjnNowak</strong>",general_title = "",escape=F)
ohio_parks
ohio_parks<-parks %>%
filter(year=='2020') %>%
filter(city %in% ohio) %>%
arrange(rank)%>%
mutate(
RANK=cell_spec(rank,"html", color="#dddddd", align="center",bold=F),
CITY=cell_spec(city,"html", color="#dddddd", align="center",bold=F),
Area=my_area_tile()(park_pct_city_points),
Accessible=my_color_tile()(pct_near_park_points),
Spending=my_color_tile()(spend_per_resident_points),
Basketball=my_color_tile()(basketball_points),
DogPark=my_color_tile()(dogpark_points),
Playground=my_color_tile()(playground_points),
RecCenter=my_color_tile()(rec_sr_points),
Restroom=my_color_tile()(restroom_points),
Splashpad=my_color_tile()(splashground_points)
)%>%
select(Rank,City,Area,Accessible,Spending,Basketball,Playground,Restroom)%>%
kable(
"html", escape = F,align=c("clcccccc"),
) %>%
kable_material_dark(html_font = "Cambria") %>%
row_spec(0, color = "white") %>%
add_header_above(c("OHIO CITIES"=2, "Score Per Category" = 6), color="white", fontsize=20)%>%
column_spec(2,width_min='4cm')%>%
column_spec(3:8,width_min='3cm')%>%
footnote(general = "<strong>Source: #TidyTuesday | Moriah Taylor | Inspired by: @BjnNowak</strong>",general_title = "",escape=F)
ohio_parks
ohio_parks<-parks %>%
filter(year=='2020') %>%
filter(city %in% ohio) %>%
arrange(rank)%>%
mutate(
RANK=cell_spec(rank,"html", color="#dddddd", align="center",bold=F),
CITY=cell_spec(city,"html", color="#dddddd", align="center",bold=F),
Area=my_area_tile()(park_pct_city_points),
Accessible=my_color_tile()(pct_near_park_points),
Spending=my_color_tile()(spend_per_resident_points),
Basketball=my_color_tile()(basketball_points),
DogPark=my_color_tile()(dogpark_points),
Playground=my_color_tile()(playground_points),
RecCenter=my_color_tile()(rec_sr_points),
Restroom=my_color_tile()(restroom_points),
Splashpad=my_color_tile()(splashground_points)
)%>%
select(Rank,City,Area,Accessible,Spending,Basketball,Playground,Restroom)%>%
kable(
"html", escape = F,align=c("clcccccc"),
) %>%
kable_material_dark(html_font = "Cambria") %>%
row_spec(0, color = "white") %>%
add_header_above(c("OHIO CITIES"=2, "Score Per Category" = 6), color="white", font_size=20)%>%
column_spec(2,width_min='4cm')%>%
column_spec(3:8,width_min='3cm')%>%
footnote(general = "<strong>Source: #TidyTuesday | Moriah Taylor | Inspired by: @BjnNowak</strong>",general_title = "",escape=F)
ohio_parks
ohio_parks<-parks %>%
filter(year=='2020') %>%
filter(city %in% ohio) %>%
arrange(rank)%>%
mutate(
RANK=cell_spec(rank,"html", color="#dddddd", align="center",bold=F),
CITY=cell_spec(city,"html", color="#dddddd", align="center",bold=F),
Area=my_area_tile()(park_pct_city_points),
Accessible=my_color_tile()(pct_near_park_points),
Spending=my_color_tile()(spend_per_resident_points),
Basketball=my_color_tile()(basketball_points),
DogPark=my_color_tile()(dogpark_points),
Playground=my_color_tile()(playground_points),
RecCenter=my_color_tile()(rec_sr_points),
Restroom=my_color_tile()(restroom_points),
Splashpad=my_color_tile()(splashground_points)
)%>%
select(RANK,CITY,Area,Accessible,Spending,Basketball,Playground,Restroom)%>%
kable(
"html", escape = F,align=c("clcccccc"),
) %>%
kable_material_dark(html_font = "Cambria") %>%
row_spec(0, color = "white") %>%
add_header_above(c("OHIO CITIES"=2, "Score Per Category" = 6), color="white", font_size=20)%>%
column_spec(2,width_min='4cm')%>%
column_spec(3:8,width_min='3cm')%>%
footnote(general = "<strong>Source: #TidyTuesday | Moriah Taylor | Inspired by: @BjnNowak</strong>",general_title = "",escape=F)
ohio_parks
ohio_parks<-parks %>%
filter(year=='2020') %>%
filter(city %in% ohio) %>%
arrange(rank)%>%
mutate(
RANK=cell_spec(rank,"html", color="#dddddd", align="center",bold=F),
CITY=cell_spec(city,"html", color="#dddddd", align="center",bold=F),
Area=my_area_tile()(park_pct_city_points),
Accessible=my_color_tile()(pct_near_park_points),
Spending=my_color_tile()(spend_per_resident_points),
Basketball=my_color_tile()(basketball_points),
DogPark=my_color_tile()(dogpark_points),
Playground=my_color_tile()(playground_points),
RecCenter=my_color_tile()(rec_sr_points),
Restroom=my_color_tile()(restroom_points),
Splashpad=my_color_tile()(splashground_points)
)%>%
select(RANK,CITY,Area,Accessible,Spending,Basketball,Playground,Restroom)%>%
kable(
"html", escape = F,align=c("clcccccc"),
) %>%
kable_material_dark(html_font = "Cambria") %>%
row_spec(0, color = "white") %>%
add_header_above(c("OHIO CITIES"=2, "Score Per Category" = 6), color="white", font_size=20)%>%
column_spec(2,width_min='4cm')%>%
column_spec(3:8,width_min='3cm')%>%
footnote(general = "Source: #TidyTuesday | Twitter: @moriah_taylor58 | Inspired by: @BjnNowak",general_title = "",escape=F)
ohio_parks
library(tidyverse)
library(tidytuesdayR) #tidytuesday
library(ggplot2) #plots
library(showtext) #add font
library(ragg) #ggsave
library(ggthemes) #plot themes
library(formattable)
library(kableExtra)
##WEEK 26 DATA: PARKS##
tuesdata <- tidytuesdayR::tt_load(2021, week = 26)
parks <- tuesdata$parks
##CODE SOURCED FROM BjnNowak ON GITHUB; BjnNowak ON TWITTER##
my_color_tile <- function() {
return_col <- function(y)
#create color scale for tiles
map_chr(y,function(x) case_when(x > 90  ~ "#0967c6",
x > 80  ~ "#5a80cf",
x > 70  ~ "#859bd8",
x > 60  ~ "#abb6e1",
x >= 50  ~ "#ced3e9",
x >= 40  ~ "#f1f1f1",
x >= 30  ~ "#e9c6c4",
x >= 20  ~ "#dd9d99",
x >= 10  ~ "#ce7370",
x >= 0  ~ "#bb4749"
))
formatter("span",
style = function(y) style(
display = "block",
padding = "5 5px",
"border-radius" = "10px",
#create conditional for font color (white vs. black font)
"color" = ifelse( return_col(y) %in% c("#0967c6", "#bb4749"),
csscolor("white"), csscolor("black")),
"background-color" = return_col(y)
)
)
}
my_area_tile <- function() {
return_col <- function(y)
#create color scale for tiles
map_chr(y,function(x) case_when(x > 40  ~ "#0967c6",
x > 30  ~ "#859bd8",
x >= 20  ~ "#f1f1f1",
x >= 10  ~ "#dd9d99",
x >= 0  ~ "#bb4749"
))
formatter("span",
style = function(y) style(
display = "block",
padding = "5 5px",
"border-radius" = "10px",
#create conditional for font color (white vs. black font)
"color" = ifelse( return_col(y) %in% c("#0967c6", "#bb4749"),
csscolor("white"), csscolor("black")),
"background-color" = return_col(y)
)
)
}
#vector of Ohio cities in dataset
ohio <- c("Cincinnati", "Cleveland", "Columbus", "Toledo")
#ohio chart
ohio_parks<-parks %>%
filter(year=='2020') %>%
filter(city %in% ohio) %>%
arrange(rank)%>%
mutate(
RANK=cell_spec(rank,"html", color="#dddddd", align="center",bold=F),
CITY=cell_spec(city,"html", color="#dddddd", align="center",bold=F),
Area=my_area_tile()(park_pct_city_points),
Accessible=my_color_tile()(pct_near_park_points),
Spending=my_color_tile()(spend_per_resident_points),
Basketball=my_color_tile()(basketball_points),
DogPark=my_color_tile()(dogpark_points),
Playground=my_color_tile()(playground_points),
RecCenter=my_color_tile()(rec_sr_points),
Restroom=my_color_tile()(restroom_points),
Splashpad=my_color_tile()(splashground_points)
)%>%
select(RANK,CITY,Area,Accessible,Spending,Basketball,Playground,Restroom)%>%
kable(
"html", escape = F,align=c("clcccccc"),
) %>%
kable_material_dark(html_font = "Cambria") %>%
row_spec(0, color = "white") %>%
add_header_above(c("OHIO CITIES"=2, "Score Per Category" = 6), color="white", font_size=20)%>%
column_spec(2,width_min='4cm')%>%
column_spec(3:8,width_min='3cm')%>%
footnote(general = "Source: #TidyTuesday | Twitter: @moriah_taylor58 | Inspired by: @BjnNowak",general_title = "",escape=F)
ohio_parks
ohio_parks<-parks %>%
filter(year=='2020') %>%
filter(city %in% ohio) %>%
arrange(rank)%>%
mutate(
RANK=cell_spec(rank,"html", color="#dddddd", align="center",bold=F),
CITY=cell_spec(city,"html", color="#dddddd", align="center",bold=F),
Area=my_area_tile()(park_pct_city_points),
Accessible=my_color_tile()(pct_near_park_points),
Spending=my_color_tile()(spend_per_resident_points),
Basketball=my_color_tile()(basketball_points),
DogPark=my_color_tile()(dogpark_points),
Playground=my_color_tile()(playground_points),
RecCenter=my_color_tile()(rec_sr_points),
Restroom=my_color_tile()(restroom_points),
Splashpad=my_color_tile()(splashground_points)
)%>%
select(RANK,CITY,Area,Accessible,Spending,Basketball,Playground,Restroom)%>%
kable(
"html", escape = F,align=c("clcccccc"),
) %>%
kable_material_dark(html_font = "Cambria") %>%
row_spec(0, color = "white") %>%
add_header_above(c("OHIO CITIES"=2, "Score Per Category" = 6), color="white", font_size=20)%>%
column_spec(2,width_min='4cm')%>%
column_spec(3:8,width_min='3cm')%>%
footnote(general = "                       Source: #TidyTuesday | Twitter: @moriah_taylor58 | Inspired by: @BjnNowak",general_title = "",escape=F)
ohio_parks
ohio_parks<-parks %>%
filter(year=='2020') %>%
filter(city %in% ohio) %>%
arrange(rank)%>%
mutate(
RANK=cell_spec(rank,"html", color="#dddddd", align="center",bold=F),
CITY=cell_spec(city,"html", color="#dddddd", align="center",bold=F),
Area=my_area_tile()(park_pct_city_points),
Accessible=my_color_tile()(pct_near_park_points),
Spending=my_color_tile()(spend_per_resident_points),
Basketball=my_color_tile()(basketball_points),
DogPark=my_color_tile()(dogpark_points),
Playground=my_color_tile()(playground_points),
RecCenter=my_color_tile()(rec_sr_points),
Restroom=my_color_tile()(restroom_points),
Splashpad=my_color_tile()(splashground_points)
)%>%
select(RANK,CITY,Area,Accessible,Spending,Basketball,Playground,Restroom)%>%
kable(
"html", escape = F,align=c("clcccccc"),
) %>%
kable_material_dark(html_font = "Cambria") %>%
row_spec(0, color = "white") %>%
add_header_above(c("OHIO CITIES"=2, "Score Per Category" = 6), color="white", font_size=20)%>%
column_spec(2,width_min='4cm')%>%
column_spec(3:8,width_min='3cm')%>%
footnote(general = "| Source: #TidyTuesday | Twitter: @moriah_taylor58 | Inspired by: @BjnNowak",general_title = "",escape=F)
ohio_parks
ohio_parks<-parks %>%
filter(year=='2020') %>%
filter(city %in% ohio) %>%
arrange(rank)%>%
mutate(
RANK=cell_spec(rank,"html", color="#dddddd", align="center",bold=F),
CITY=cell_spec(city,"html", color="#dddddd", align="center",bold=F),
Area=my_area_tile()(park_pct_city_points),
Accessible=my_color_tile()(pct_near_park_points),
Spending=my_color_tile()(spend_per_resident_points),
Basketball=my_color_tile()(basketball_points),
DogPark=my_color_tile()(dogpark_points),
Playground=my_color_tile()(playground_points),
RecCenter=my_color_tile()(rec_sr_points),
Restroom=my_color_tile()(restroom_points),
Splashpad=my_color_tile()(splashground_points)
)%>%
select(RANK,CITY,Area,Accessible,Spending,Basketball,Playground,Restroom)%>%
kable(
"html", escape = F,align=c("clcccccc"),
) %>%
kable_material_dark(html_font = "Cambria") %>%
row_spec(0, color = "white") %>%
add_header_above(c("OHIO CITIES"=2, "Park Scores Per Category" = 6), color="white", font_size=20)%>%
column_spec(2,width_min='4cm')%>%
column_spec(3:8,width_min='3cm')%>%
footnote(general = "| Source: #TidyTuesday | Twitter: @moriah_taylor58 | Inspired by: @BjnNowak",general_title = "",escape=F)
ohio_parks
ohio_parks<-parks %>%
filter(year=='2020') %>%
filter(city %in% ohio) %>%
arrange(rank)%>%
mutate(
RANK=cell_spec(rank,"html", color="#dddddd", align="center",bold=F),
CITY=cell_spec(city,"html", color="#dddddd", align="center",bold=F),
Area=my_area_tile()(park_pct_city_points),
Accessibility=my_color_tile()(pct_near_park_points),
Spending=my_color_tile()(spend_per_resident_points),
Basketball=my_color_tile()(basketball_points),
DogPark=my_color_tile()(dogpark_points),
Playground=my_color_tile()(playground_points),
RecCenter=my_color_tile()(rec_sr_points),
Restroom=my_color_tile()(restroom_points),
Splashpad=my_color_tile()(splashground_points)
)%>%
select(RANK,CITY,Area,Accessibility,Spending,Basketball,Playground,Restroom)%>%
kable(
"html", escape = F,align=c("clcccccc"),
) %>%
kable_material_dark(html_font = "Cambria") %>%
row_spec(0, color = "white") %>%
add_header_above(c("OHIO CITIES"=2, "Park Scores Per Category" = 6), color="white", font_size=20)%>%
column_spec(2,width_min='4cm')%>%
column_spec(3:8,width_min='3cm')%>%
footnote(general = "| Source: #TidyTuesday | Twitter: @moriah_taylor58 | Inspired by: @BjnNowak",general_title = "",escape=F)
ohio_parks
library(tidyverse)
library(tidytuesdayR)
library(ggplot2)
library(ggtext)
library(showtext)
library(ragg)
library(ggthemes)
library(png)
library(grid)
##LOAD DATA##
tuesdata <- tidytuesdayR::tt_load(2021, week = 24)
fishing <- tuesdata$fishing
##EDA AND TRANSFORMATION##
#filter to Lake Erie
erie <- fishing %>% filter(lake=="Erie")
#filter to Ohio
ohio <- erie %>% filter(region=="Ohio (OH)")
#look at unique species
unique(ohio$species)
#make list of fish of interest
fishies <- c("Walleye", "Yellow Perch", "White Bass")
#filter to fish of interest
fish3 <- ohio %>% filter(species %in% fishies)
#filter to the years 2010 and 2015
years <- c(2010, 2015)
fish <- fish3 %>% filter(year %in% years)
##VISUALIZATION##
font_add(family = "regular", "Merriweather-Regular.ttf")
showtext_auto()
my_theme <- theme(
#titles
plot.title=element_markdown(family="regular", vjust=0.5,
hjust=1, size=55, color="white"),
plot.caption=element_text(family="regular", size=22, color="#cccccc",
vjust=-4, hjust=0.5),
#background
panel.border=element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.margin=ggplot2::margin(0.5, 0.5, 0.5, 0.5, "in"),
#axes
axis.ticks.length=unit(0.15, "cm"),
axis.ticks = element_blank(),
axis.line = element_blank(),
axis.title.x = element_text(size=40, family="regular", color="white"),
axis.title.y = element_blank(),
axis.text.y = element_text(size=35, family="regular", color="white"),
axis.text.x = element_blank(),
#no legend
legend.position = "none")
year_colors <- c("#B3B047", "#487497",) #lime green and steel blue
#load images
walleye_png <- readPNG("walleye-clipart.png")
whitebass_png <- readPNG("bass-clipart.png")
yellowperch_png <- readPNG("perch-clipart.png")
#prep images for plot
walleye_img <- rasterGrob(walleye_png, interpolate = TRUE)
whitebass_img <- rasterGrob(whitebass_png, interpolate = TRUE)
yellowperch_img <- rasterGrob(yellowperch_png, interpolate = TRUE)
(fish_plot <- fish %>% ggplot(aes(fill=as.factor(-year), y=grand_total, x=species)) +
geom_bar(position="dodge", stat="identity") +
scale_fill_manual(values=year_colors) +
geom_text(aes(label=grand_total, family="regular"),
position=position_dodge(width=0.9), hjust=1.1, size=10, color="white") +
labs(
title="Fish Populations in Lake Erie in <i style='color:#B3B047'>2010</i> and <i style='color:#487497'>2015</i>",
caption="Source: Great Lakes Fishery Commission | Moriah Taylor | Twitter: moriah_taylor58 | GitHub: moriahtaylor1") +
ylab("")+
#add images
annotation_custom(yellowperch_img, xmin=2, xmax=4, ymin=0, ymax=2000) +
annotation_custom(whitebass_img, xmin=-Inf, xmax=Inf, ymin=0, ymax=2000) +
annotation_custom(walleye_img, xmin=-1, xmax=3, ymin=0, ymax=2000) +
#make horizontal
coord_flip() +
#add theme
my_theme)
setwd("D:/Users/Moriah/tidy-tuesday/2021_Week24")
library(tidyverse)
library(tidytuesdayR)
library(ggplot2)
library(ggtext)
library(showtext)
library(ragg)
library(ggthemes)
library(png)
library(grid)
##LOAD DATA##
tuesdata <- tidytuesdayR::tt_load(2021, week = 24)
fishing <- tuesdata$fishing
##EDA AND TRANSFORMATION##
#filter to Lake Erie
erie <- fishing %>% filter(lake=="Erie")
#filter to Ohio
ohio <- erie %>% filter(region=="Ohio (OH)")
#look at unique species
unique(ohio$species)
#make list of fish of interest
fishies <- c("Walleye", "Yellow Perch", "White Bass")
#filter to fish of interest
fish3 <- ohio %>% filter(species %in% fishies)
#filter to the years 2010 and 2015
years <- c(2010, 2015)
fish <- fish3 %>% filter(year %in% years)
##VISUALIZATION##
font_add(family = "regular", "Merriweather-Regular.ttf")
showtext_auto()
my_theme <- theme(
#titles
plot.title=element_markdown(family="regular", vjust=0.5,
hjust=1, size=55, color="white"),
plot.caption=element_text(family="regular", size=22, color="#cccccc",
vjust=-4, hjust=0.5),
#background
panel.border=element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.margin=ggplot2::margin(0.5, 0.5, 0.5, 0.5, "in"),
#axes
axis.ticks.length=unit(0.15, "cm"),
axis.ticks = element_blank(),
axis.line = element_blank(),
axis.title.x = element_text(size=40, family="regular", color="white"),
axis.title.y = element_blank(),
axis.text.y = element_text(size=35, family="regular", color="white"),
axis.text.x = element_blank(),
#no legend
legend.position = "none")
year_colors <- c("#B3B047", "#487497",) #lime green and steel blue
#load images
walleye_png <- readPNG("walleye-clipart.png")
whitebass_png <- readPNG("bass-clipart.png")
yellowperch_png <- readPNG("perch-clipart.png")
#prep images for plot
walleye_img <- rasterGrob(walleye_png, interpolate = TRUE)
whitebass_img <- rasterGrob(whitebass_png, interpolate = TRUE)
yellowperch_img <- rasterGrob(yellowperch_png, interpolate = TRUE)
(fish_plot <- fish %>% ggplot(aes(fill=as.factor(-year), y=grand_total, x=species)) +
geom_bar(position="dodge", stat="identity") +
scale_fill_manual(values=year_colors) +
geom_text(aes(label=grand_total, family="regular"),
position=position_dodge(width=0.9), hjust=1.1, size=10, color="white") +
labs(
title="Fish Populations in Lake Erie in <i style='color:#B3B047'>2010</i> and <i style='color:#487497'>2015</i>",
caption="Source: Great Lakes Fishery Commission | Moriah Taylor | Twitter: moriah_taylor58 | GitHub: moriahtaylor1") +
ylab("")+
#add images
annotation_custom(yellowperch_img, xmin=2, xmax=4, ymin=0, ymax=2000) +
annotation_custom(whitebass_img, xmin=-Inf, xmax=Inf, ymin=0, ymax=2000) +
annotation_custom(walleye_img, xmin=-1, xmax=3, ymin=0, ymax=2000) +
#make horizontal
coord_flip() +
#add theme
my_theme)
year_colors <- c("#B3B047", "#487497") #lime green and steel blue
#load images
walleye_png <- readPNG("walleye-clipart.png")
whitebass_png <- readPNG("bass-clipart.png")
yellowperch_png <- readPNG("perch-clipart.png")
#prep images for plot
walleye_img <- rasterGrob(walleye_png, interpolate = TRUE)
whitebass_img <- rasterGrob(whitebass_png, interpolate = TRUE)
yellowperch_img <- rasterGrob(yellowperch_png, interpolate = TRUE)
(fish_plot <- fish %>% ggplot(aes(fill=as.factor(-year), y=grand_total, x=species)) +
geom_bar(position="dodge", stat="identity") +
scale_fill_manual(values=year_colors) +
geom_text(aes(label=grand_total, family="regular"),
position=position_dodge(width=0.9), hjust=1.1, size=10, color="white") +
labs(
title="Fish Populations in Lake Erie in <i style='color:#B3B047'>2010</i> and <i style='color:#487497'>2015</i>",
caption="Source: Great Lakes Fishery Commission | Moriah Taylor | Twitter: moriah_taylor58 | GitHub: moriahtaylor1") +
ylab("")+
#add images
annotation_custom(yellowperch_img, xmin=2, xmax=4, ymin=0, ymax=2000) +
annotation_custom(whitebass_img, xmin=-Inf, xmax=Inf, ymin=0, ymax=2000) +
annotation_custom(walleye_img, xmin=-1, xmax=3, ymin=0, ymax=2000) +
#make horizontal
coord_flip() +
#add theme
my_theme)
